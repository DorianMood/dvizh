(this.webpackJsonpdvizh=this.webpackJsonpdvizh||[]).push([[0],{129:function(e,t,n){},208:function(e,t,n){e.exports=n(341)},341:function(e,t,n){"use strict";n.r(t);n(209),n(235),n(237),n(238),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277);var a=n(20),r=n.n(a),c=n(29),l=n(0),o=n.n(l),i=n(140),u=n.n(i),s=n(33),m=n(25),f=n.n(m),d=n(43),p=n.n(d),b=(n(286),n(343)),E=(n(124),n(141)),v=n.n(E),h=function(){return o.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no, viewport-fit=cover"})},g=n(13),j=n(97),y=n.n(j),O=n(4),k=n(151),x=n.n(k),C=n(152),w=n.n(C),S=n(58),I=n(36),A=(n(127),n(129),n(75)),z=n(153),R=n.n(z),N=n(76),U=n.n(N),K=n(154),V=n.n(K),G=n(77),D=n.n(G),F=function(e){var t,n=e.event,a=Object(s.b)().router;return o.a.createElement(O.c,{size:"l",onClick:function(){a.navigate("event",{id:n.id,event:n}),console.log("card click")}},o.a.createElement(O.e,{before:o.a.createElement(O.a,{size:32,src:null!==(t=n.user.photo)&&void 0!==t?t:null},n.user.photo?null:o.a.createElement(U.a,null)),size:"l",description:o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(V.a,null),n.location.name),asideContent:o.a.createElement(o.a.Fragment,null,n.price&&0!==n.price?o.a.createElement("div",{style:{textAlign:"center",color:"green"}},o.a.createElement(D.a,{style:{margin:"0 auto"}}),Math.round(n.price)):o.a.createElement(o.a.Fragment,null),o.a.createElement("div",null,new Date(n.date).toLocaleDateString())),bottomContent:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,n.description))},n.name))},_=function(e){var t=e.filterValues,n=e.onUpdate;return o.a.createElement(O.j,null,o.a.createElement(O.w,{min:500,max:5e4,step:500,value:null===t.location?1:t.location,onChange:function(e){return n({key:"location",value:e})},top:"\u0412 \u0440\u0430\u0434\u0438\u0443\u0441\u0435 ".concat(t.location," \u043c")}),o.a.createElement(O.e,{asideContent:o.a.createElement(O.y,{defaultChecked:t.date,onChange:function(e){return n({key:"date",value:e.target.checked})}})},"\u0421\u043a\u043e\u0440\u043e"),o.a.createElement(O.e,{asideContent:o.a.createElement(O.y,{defaultChecked:t.friends,onChange:function(e){return n({key:"friends",value:e.target.checked})}})},"\u0414\u0440\u0443\u0437\u044c\u044f"),o.a.createElement(O.e,null),o.a.createElement(O.e,null))},T=function(e){var t=e.events,n=e.filter,a=e.setFilter,r=Object(l.useState)(null),c=Object(g.a)(r,2),i=c[0],u=c[1],s=Object(l.useState)(n),m=Object(g.a)(s,2),f=m[0],d=m[1];Object(l.useEffect)((function(){d(n)}),[n]);var p=t.filter((function(e){return e})),b=o.a.createElement(O.q,{activeModal:i,onClose:function(){u(null),a(f),p=t.filter((function(e){return e}))}},o.a.createElement(O.o,{id:"main-modal",header:o.a.createElement(O.p,null,o.a.createElement(O.C,{level:"2"},"\u0424\u0438\u043b\u044c\u0442\u0440\u044b")),dynamicContentHeight:!0},o.a.createElement(_,{filterValues:f,onUpdate:function(e){var t=e.key,a=e.value;d(Object(I.a)(Object(I.a)({},n),{},Object(A.a)({},t,a)))}})));return o.a.createElement(O.E,{modal:b},o.a.createElement(O.l,{separator:"hide",header:o.a.createElement(O.f,{before:o.a.createElement(R.a,null),onClick:function(){u("main-modal")}},"\u0424\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c")},o.a.createElement(O.d,null,p.map((function(e,t){return o.a.createElement(F,{key:t,event:e})})))))},W=n(57),B=n.n(W),M=[{key:"\ud83d\ude0a",value:[]},{key:"\ud83d\ude34",value:[]},{key:"\ud83d\ude0d",value:[]},{key:"\ud83e\udd2c",value:[]}],H=function(e){var t=e.eventId,n=e.userId,a=B.a.database(),i=Object(l.useState)([]),u=Object(g.a)(i,2),s=u[0],m=u[1];Object(l.useEffect)((function(){(function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.ref("rating/".concat(t)).on("value",(function(e){var t=e.val(),n=t?t.map((function(e){return{key:e.key,value:e.ids?Object.values(e.ids).length:0}})):M;m(n)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);return t?o.a.createElement(O.g,{style:{display:"flex"}},(s||M).map((function(e,r){return o.a.createElement(O.g,{key:r,style:{display:"flex",flexDirection:"column",flex:1},onClick:function(){return function(e){s.forEach((function(r,c){r.key===e?a.ref("rating/".concat(t,"/").concat(c,"/ids/").concat(n)).set(!0):a.ref("rating/".concat(t,"/").concat(c,"/ids/").concat(n)).remove()}))}(e.key)}},o.a.createElement(O.C,{level:e.set?"1":"2",style:{textAlign:"center"}},e.key),o.a.createElement(O.C,{level:e.set?"2":"3",style:{textAlign:"center"}},e.value))}))):(a.ref("events").orderByChild("user/vkId").equalTo(null!==n&&void 0!==n?n:0).on("value",(function(e){console.log(e.val()?Object.keys(e.val()):"NO EVENTS FOR ".concat(n))})),o.a.createElement(o.a.Fragment,null))},P=function(e){var t=e.user;return console.log("User : ",t),o.a.createElement(O.u,{className:"user-profile-header",disabled:!0,multiline:!0,before:o.a.createElement(O.a,{size:72,src:null!==t?t.photo_200:null},null===t?o.a.createElement(U.a,null):null),text:"Rating here soon"},o.a.createElement(O.C,{level:"2",weight:"regular"},null!==t?"".concat(t.first_name," ").concat(t.last_name):"\u041d\u0438\u043a\u0438\u0442\u0430 \u0414\u043e\u043b\u0433\u043e\u0448\u0435\u0438\u043d"))},q=n(155),L=n.n(q),J=function(){var e=Object(s.b)().router;return o.a.createElement("div",{style:{position:"fixed",left:24,bottom:64,zIndex:100},onClick:function(){return e.navigate("create")}},o.a.createElement(O.a,{style:{background:"var(--button_primary_background)",boxShadow:"0px 0px 10px black"}},o.a.createElement(L.a,{fill:"var(--button_primary_foreground)"})))},Q=n(156),X=n(157),Y=function(){function e(t,n,a){Object(Q.a)(this,e),this.location=t,this.date=n}return Object(X.a)(e,[{key:"update",value:function(e){this[e.key]=e.value}}]),e}(),Z=n(78),$=n.n(Z),ee=function(e){var t=p.a.database(),n=Object(l.useState)(!0),a=Object(g.a)(n,2),i=a[0],u=a[1],s=Object(l.useState)(null),m=Object(g.a)(s,2),d=m[0],b=m[1],E=Object(l.useState)([]),v=Object(g.a)(E,2),h=v[0],j=v[1],y=Object(l.useState)(new Y(0,null)),k=Object(g.a)(y,2),x=k[0],C=k[1];Object(l.useEffect)((function(){function e(){return(e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);var w=function(){var e=h[h.length-1],n=t.ref("events").orderByKey();h.length>0&&(n=n.startAt(e.id)),n.limitToFirst(3).on("value",(function(e){var t=e.val()?Object.entries(e.val()).map((function(e){return Object(I.a)({id:e[0]},e[1])})):[];h.length>0&&t.splice(0,1),t.length>0?j([].concat(Object(S.a)(h),Object(S.a)(t))):i&&u(!1)}))};return Object(l.useEffect)((function(){w()}),[t]),o.a.createElement(O.r,null,o.a.createElement(P,{user:d}),o.a.createElement($.a,{threshold:0,loadMore:w,hasMore:i,loader:o.a.createElement(O.x,{key:0})},o.a.createElement(T,{events:h,filter:x,setFilter:C})),o.a.createElement(J,null))},te=n(158),ne=n(159),ae=n(30),re=function(e){Object(s.b)();var t=p.a.database(),n=Object(l.useState)(!0),a=Object(g.a)(n,2),i=a[0],u=a[1],m=Object(l.useState)([]),d=Object(g.a)(m,2),b=d[0],E=d[1],v=Object(l.useState)([56.85,60.6]),h=Object(g.a)(v,2),j=h[0],y=h[1],k=Object(l.useState)(new Y(3e3,null)),x=Object(g.a)(k,2),C=x[0],w=x[1];Object(l.useEffect)((function(){function e(){return(e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.send("VKWebAppGetGeodata");case 2:t=e.sent,y([t.lat,t.long]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var A=function(){var e=b[b.length-1],n=t.ref("events").orderByKey();b.length>0&&(n=n.startAt(e.id)),n.limitToFirst(3).on("value",(function(e){var t=e.val()?Object.entries(e.val()).map((function(e){return Object(I.a)({id:e[0]},e[1])})):[];b.length>0&&t.splice(0,1),t.length>0?E([].concat(Object(S.a)(b),Object(S.a)(t))):i&&u(!1)}))};Object(l.useEffect)((function(){A()}),[]);var z=b.filter((function(e){if(C.location&&Object(ne.getDistance)({latitude:e.location.lat,longitude:e.location.lng},{latitude:j[0],longitude:j[1]})<=C.location)return!0;return!1}));return o.a.createElement(O.r,null,o.a.createElement(O.g,{style:{height:"240px",padding:0}},o.a.createElement(ae.d,null,o.a.createElement(ae.b,{defaultState:{center:j,zoom:10},width:"100%"},o.a.createElement(ae.c,{geometry:j,options:{preset:"islands#redCircleDotIcon"},properties:{hintContent:"this is hint",balloonContent:"this is balloon"},modules:["geoObject.addon.balloon","geoObject.addon.hint"]}),z.map((function(e,t){var n=[e.location.lat,e.location.lng];return o.a.createElement(ae.c,{key:t,geometry:n,modules:["geoObject.addon.balloon"],properties:{balloonContent:Object(te.renderToString)(o.a.createElement("a",{href:"#/event/".concat(e.id)},e.name))}})})),o.a.createElement(ae.a,{geometry:[j,C.location]})))),o.a.createElement($.a,{threshold:0,loadMore:A,hasMore:i,loader:o.a.createElement(O.x,{key:0})},o.a.createElement(T,{events:z,filter:C,setFilter:w})))},ce=n(79),le=n.n(ce),oe=n(160),ie=n.n(oe),ue=n(161),se=n.n(ue),me=function(e){var t=e.user;return o.a.createElement(O.l,null,o.a.createElement(O.m,{mode:"secondary"},"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440"),o.a.createElement("a",{href:"https://vk.com/id".concat(t.vkId)},o.a.createElement(O.v,{before:o.a.createElement(O.a,{size:40,src:t.photo,after:"textz"})},"".concat(t.firstName," ").concat(t.lastName))))},fe=function(){var e=Object(s.c)("event").route.params,t=e.id,n=e.event,a=Object(l.useState)(n),i=Object(g.a)(a,2),u=i[0],m=i[1],d=Object(l.useState)(),p=Object(g.a)(d,2),b=p[0],E=p[1],v=Object(l.useState)({}),h=Object(g.a)(v,2),j=h[0],y=h[1],k=B.a.database();if(Object(l.useEffect)((function(){n||k.ref("events/".concat(t)).on("value",(function(e){m(e.val())})),k.ref("subscriptions/".concat(t)).on("value",(function(e){y(e.val())}))}),[k,t,n]),Object(l.useEffect)((function(){(function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,E(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),!u)return o.a.createElement(O.x,{size:"large"});return console.log("USER is : ",b),o.a.createElement(O.r,{id:t},o.a.createElement(O.s,{left:o.a.createElement(O.t,{onClick:function(){window.history.back()}},o.a.createElement(le.a,null)),right:o.a.createElement(O.t,{onClick:function(){}},o.a.createElement(ie.a,null))},o.a.createElement("h5",null,u.name)),o.a.createElement(H,{eventId:t,userId:b?b.id:"dorianmood"}),o.a.createElement(O.g,{style:{height:"240px",padding:0}},o.a.createElement(ae.d,null,o.a.createElement(ae.b,{defaultState:{center:[u.location.lat,u.location.lng],zoom:10},width:"100%"},o.a.createElement(ae.c,{geometry:[u.location.lat,u.location.lng],options:{preset:"islands#geolocationIcon"}})))),o.a.createElement(O.l,{header:o.a.createElement(O.m,{mode:"secondary"},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435")},o.a.createElement(O.e,{multiline:!0,size:"l"},u.description)),o.a.createElement(me,{user:u.user}),o.a.createElement(O.l,{header:o.a.createElement(O.m,{mode:"secondary"},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f")},o.a.createElement(O.g,null,o.a.createElement("div",{style:{backgroundImage:"url(https://api.parkseason.ru/images/styles/1200_500/d2/af/30e62fddc14c05988b44e7c02788e18759dce9c49e9cc281915310.jpg)",height:"200px",display:"flex",alignItems:"flex-end",justifyContent:"center",paddingBottom:"6px",borderRadius:12}},j?o.a.createElement(O.D,{photos:Object.keys(j).map((function(e){return j[e].photo})),size:"m",layout:"vertical",style:{color:"#fff"}},Object.keys(j).length," \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432"):o.a.createElement(o.a.Fragment,null))),o.a.createElement(O.g,{style:{display:"flex"}},o.a.createElement(O.g,{style:{flex:"1 1 auto",display:"flex",justifyContent:"center"}},o.a.createElement(D.a,{style:{margin:"-2px 10px 0 0"},fill:"green"})," ",u.price),o.a.createElement(O.g,{style:{flex:"1 1 auto",display:"flex",justifyContent:"center"}},o.a.createElement(se.a,{style:{margin:"-2px 10px 0 0"}}),new Date(u.date).toLocaleString())),b&&u.user.vkId===b.id?o.a.createElement(o.a.Fragment,null):b&&j&&-1!==Object.keys(j).indexOf("".concat(b.id))?o.a.createElement(O.g,null,o.a.createElement(O.b,{stretched:!0,mode:"outline",style:{padding:"10px"},onClick:function(){k.ref("subscriptions/".concat(t,"/").concat(b.id)).remove()}},"\u041d\u0435 \u043f\u043e\u0439\u0434\u0443")):o.a.createElement(O.g,null,o.a.createElement(O.b,{stretched:!0,mode:"commerce",style:{padding:"10px"},onClick:function(){var e={firstName:b.first_name,lastName:b.last_name,photo:b.photo_200};k.ref("subscriptions/".concat(t,"/").concat(b.id)).set(e)}},"\u041f\u043e\u0439\u0434\u0443")),b&&b.id===u.user.vkId?o.a.createElement(O.g,null,o.a.createElement(O.b,{stretched:!0,mode:"destructive",style:{padding:"10px"},onClick:function(){k.ref("events/".concat(t)).remove().then((function(){console.log("Event removed"),k.ref("subscriptions/".concat(t)).remove().then((function(){console.log("Subscriptions removed"),window.history.back()}))}))}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")):o.a.createElement(o.a.Fragment,null)))},de=n(162),pe=n.n(de),be=function(){var e=Object(l.useState)({vkId:"dorianmood",photo:"",firstName:"Developer",lastName:"Developer"}),t=Object(g.a)(e,2),n=t[0],a=t[1],i=p.a.database(),u=Object(l.useRef)(),s=Object(l.useRef)(),m=Object(l.useRef)(),d=Object(l.useRef)(),b=(new Date).toISOString().split(".")[0];console.log(b);var E=Object(l.useRef)(b),v=Object(l.useState)({name:"\u041c\u0435\u0441\u0442\u043e",coordinates:[56.8389,60.605192]}),h=Object(g.a)(v,2),j=h[0],y=h[1],k=Object(l.useState)([56.8389,60.605192]),x=Object(g.a)(k,2),C=x[0],w=x[1];Object(l.useEffect)((function(){function e(){return(e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.send("VKWebAppGetGeodata");case 2:return t=e.sent,w([t.lat,t.long]),e.next=6,f.a.send("VKWebAppGetUserInfo");case 6:n=e.sent,a({vkId:n.id,photo:n.photo_200,firstName:n.first_name,lastName:n.last_name});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(l.useEffect)((function(){var e="https://geocode-maps.yandex.ru/1.x/?apikey=".concat("0660ba4c-e52e-4ada-a9fa-9ce9df0ea9f8","&geocode=").concat([j.coordinates[1],j.coordinates[0]].join(","),"&format=json");fetch(e).then((function(e){return e.json()})).then((function(e){y(Object(I.a)(Object(I.a)({},j),{},{name:e.response.GeoObjectCollection.featureMember[0].GeoObject.name}))}))}),[j.coordinates]);var S=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.ref("events").push({name:u.current.value,price:s.current.value,date:E.current.valueAsNumber,picture:"",description:d.current.value,location:{name:j.name,lat:j.coordinates[0],lng:j.coordinates[1]},user:n}),i.ref("subscriptions/".concat(t.key)).set({firstName:n.firstName,lastName:n.lastName,photo:n.photo}).then((function(){return console.log("SUBSCRIBTION CREATED")})),i.ref("rating/".concat(t.key)).set(M.map((function(e){return{key:e.key}}))).then((function(){return console.log("RATING CREATED")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(O.r,null,o.a.createElement(O.s,{left:o.a.createElement(O.t,{onClick:function(){window.history.back()}},o.a.createElement(le.a,null))},"\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435"),o.a.createElement(O.j,null,o.a.createElement(O.k,{top:j.name},o.a.createElement(O.g,{style:{height:"150px"}},o.a.createElement(ae.d,null,o.a.createElement(ae.b,{defaultState:{center:j.coordinates,zoom:10},height:"150px",width:"100%",onClick:function(e){y(Object(I.a)(Object(I.a)({},j),{},{coordinates:e.get("coords")}))}},o.a.createElement(ae.c,{geometry:C,options:{preset:"islands#redCircleDotIcon"}}),o.a.createElement(ae.c,{geometry:j.coordinates}))))),o.a.createElement(O.n,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",getRef:u}),o.a.createElement(O.i,{top:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u043e\u0442\u043e",getRef:m,before:o.a.createElement(pe.a,null),controlSize:"l"},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0433\u0430\u043b\u0435\u0440\u0435\u044e"),o.a.createElement(O.n,{top:"\u0414\u0430\u0442\u0430",getRef:E,min:b,defaultValue:b,type:"datetime-local",required:!0}),o.a.createElement(O.n,{top:"\u0426\u0435\u043d\u0430",getRef:s,type:"number",defaultValue:0}),o.a.createElement(O.B,{top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",getRef:d,defaultValue:0}),o.a.createElement(O.b,{type:"submit",size:"xl",onClick:function(){S().then((function(){window.history.back()}))}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))},Ee=[{id:"me",text:"\u041c\u043e\u0438",icon:o.a.createElement(x.a,null)},{id:"location",text:"\u0420\u044f\u0434\u043e\u043c",icon:o.a.createElement(w.a,null)}],ve=function(){var e=Object(s.b)().route,t=Object(l.useState)(null),n=Object(g.a)(t,2),a=n[0],r=n[1],c=Object(s.d)(),i=Ee.filter((function(t){return t.id===e.name}))[0],u=i?i.id:Ee[0].id;if(Object(l.useEffect)((function(){r(u)}),[u]),"event"===e.name)return o.a.createElement(fe,null);if("create"===e.name)return o.a.createElement(be,null);var m=function(e){var t=e.currentTarget.dataset.story;c.navigate(t),r(t)},f=o.a.createElement(O.z,null,Ee.map((function(e,t){return o.a.createElement(O.A,{onClick:m,selected:a===e.id,"data-story":e.id,text:e.text,key:t},e.icon)})));return o.a.createElement(O.h,{activeStory:a,tabbar:f},o.a.createElement(y.a,{id:"me",key:"0"},o.a.createElement(ee,null)),o.a.createElement(y.a,{id:"location",key:"1"},o.a.createElement(re,null)))};v.a.config();var he=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(h,null),o.a.createElement(ve,null))},ge=n(63),je=n(164),ye=[{name:"main",path:"/"},{name:"me",path:"/me"},{name:"friends",path:"/friends"},{name:"location",path:"/location"},{name:"event",path:"/event/:id"},{name:"user",path:"/user/:id"},{name:"create",path:"/create"}];var Oe=Object(l.createContext)(),ke=function(e){var t=e.children,n=Object(l.useState)(),a=Object(g.a)(n,2),i=a[0],u=a[1],s=Object(l.useState)(),m=Object(g.a)(s,2),d=m[0],p=m[1];return Object(l.useEffect)((function(){(function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,console.log("USER AUTH : ",t),p(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(l.useEffect)((function(){B.a.app().auth().onAuthStateChanged((function(e){u(e)}))}),[]),console.log("USER AUTH : ",d),o.a.createElement(Oe.Provider,{value:i},t)};f.a.send("VKWebAppInit");var xe=function(){var e=Object(ge.b)(ye,{defaultRoute:"me"});return e.usePlugin(Object(je.a)({useHash:!0})),e}();p.a.initializeApp({apiKey:"AIzaSyAx35YiAGmieyNOqdsHerhj3CeQQGkIKX4",projectId:"dvizh-94592",databaseURL:"https://dvizh-94592.firebaseio.com",authDomain:"dvizh-94592.firebaseapp.com"}),function(){var e=Object(c.a)(r.a.mark((function e(){var t,n,a,c,l,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.send("VKWebAppStorageGet",{keys:["userUuid"]});case 2:return t=e.sent,e.next=5,f.a.send("VKWebAppGetUserInfo");case 5:if(n=e.sent,a=n.id,c=t.keys[0].value){e.next=13;break}return l=Object(b.a)(),c=l,e.next=13,f.a.send("VKWebAppStorageSet",{key:"userUuid",value:l}).catch((function(e){return console.log(e)}));case 13:(o=p.a.auth()).createUserWithEmailAndPassword("".concat(a,"@vk.com"),c).then((function(e){console.log("create user : OK")})).catch((function(e){console.error(e.code)})).then((function(){o.signInWithEmailAndPassword("".concat(a,"@vk.com"),c).then((function(e){console.log("login : OK")})).catch((function(e){console.log(e.code)}))}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),xe.start((function(){u.a.render(o.a.createElement(ke,null,o.a.createElement(s.a,{router:xe},o.a.createElement(he,{router:xe}))),document.getElementById("root"))})),Promise.all([n.e(3),n.e(4)]).then(n.bind(null,347)).then((function(e){}))}},[[208,1,2]]]);
//# sourceMappingURL=main.baf5e191.chunk.js.map